<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>–ó–∞–∫–∞–∑—ã | cfudik</title>
        <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://cdn.discordapp.com; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
        <meta name="referrer" content="strict-origin-when-cross-origin">
        <meta http-equiv="X-Content-Type-Options" content="nosniff">
        <meta http-equiv="X-Frame-Options" content="DENY">
        <link rel="icon" type="image/x-icon" href="icon.png">
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZVJPNTKK9N"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-ZVJPNTKK9N');
        </script>
        <link rel="stylesheet" href="styles.css">
    </head>
<body>
    <div class="stars"></div>
    <div class="background-pattern"></div>
    
    <header class="header">
        <div class="header-content">
            <div class="logo">OVERHAUL</div>
            <nav class="nav-links">
                <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="index.html#portfolio" class="nav-link">–ú–æ–¥—ã</a>
                <a href="http://t.me/Test_Overhaul_Bot?start=20" class="nav-link" target="_blank">–ú–∞–≥–∞–∑–∏–Ω</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="orders-section">
                <div class="section-header">
                    <h2>–ó–ê–ö–ê–ó–ê–¢–¨ –†–ê–ó–†–ê–ë–û–¢–ö–£</h2>
                    <div class="back-button" onclick="window.history.back()">‚Üê –ù–∞–∑–∞–¥</div>
                    <div class="section-divider"></div>
                </div>

                <form class="order-form" id="orderForm">
                    <div class="form-group">
                        <label for="service-type">–¢–∏–ø —É—Å–ª—É–≥–∏:</label>
                        <select id="service-type" name="service-type" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                            <option value="website">–í–µ–±-—Å–∞–π—Ç</option>
                            <option value="tg-bot">–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç</option>
                            <option value="ds-bot">Discord –±–æ—Ç</option>
                            <option value="mod">–ú–æ–¥ –¥–ª—è –∏–≥—Ä—ã</option>
                            <option value="other">–î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:</label>
                        <textarea id="description" name="description" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="budget">–ë—é–¥–∂–µ—Ç (‚ÇΩ):</label>
                        <input type="number" id="budget" name="budget" min="10" required>
                    </div>

                    <div class="form-group">
                        <label for="contact">–ö–æ–Ω—Ç–∞–∫—Ç (Telegram/Discord):</label>
                        <input type="text" id="contact" name="contact" required>
                    </div>

                    <button type="submit" class="btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                    <button type="button" class="btn-info" id="infoButton">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="social-links">
                <a href="https://www.youtube.com/@cfudik1337" class="social-link" target="_blank">
                    <img src="yt.png" alt="YouTube">
                </a>
                <a href="https://discord.gg/mtxr5dFtZk" class="social-link" target="_blank">
                    <img src="ds.png" alt="Discord">
                </a>
                <a href="https://t.me/ov3rhau1" class="social-link" target="_blank">
                    <img src="tg.png" alt="Telegram">
                </a>
            </div>
            <div class="footer-text">
                ¬© 2025 CFUDIK | All Rights Reserved
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('infoButton').addEventListener('click', function() {
            const infoText = `–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å:\n\n1. –í—ã –∑–∞–ø–æ–ª–Ω—è–µ—Ç–µ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏\n2. –Ø —Å–≤—è–∑—ã–≤–∞—é—Å—å —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤\n3. –û–±—Å—É–∂–¥–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∏ —Å—Ä–æ–∫–∏\n4. –í—ã –≤–Ω–æ—Å–∏—Ç–µ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É 50%\n5. –Ø –ø—Ä–∏—Å—Ç—É–ø–∞—é –∫ —Ä–∞–±–æ—Ç–µ\n6. –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç\n7. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ 50%`;
            alert(infoText);
        });

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        async function checkConnection() {
            try {
                const response = await fetch('https://httpbin.org/get', { 
                    method: 'GET',
                    cache: 'no-store',
                    mode: 'no-cors'
                });
                return true;
            } catch (e) {
                return false;
            }
        }

        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = this;
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.textContent;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            submitBtn.disabled = true;

            const formData = {
                serviceType: form.querySelector('#service-type').value,
                description: form.querySelector('#description').value,
                budget: form.querySelector('#budget').value,
                contact: form.querySelector('#contact').value
            };

            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
                const isConnected = await checkConnection();
                if (!isConnected) {
                    throw new Error('–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
                }

                // 1. –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ Telegram API
                const botToken = '8133338542:AAH68upHC-7_EZIimySRVvQfxcIRf02K1jw';
                const chatId = '7160755659';
                
                const telegramMessage = `üìå –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!\n\n‚ñ™ –¢–∏–ø —É—Å–ª—É–≥–∏: ${formData.serviceType}\n‚ñ™ –û–ø–∏—Å–∞–Ω–∏–µ: ${formData.description}\n‚ñ™ –ë—é–¥–∂–µ—Ç: ${formData.budget}‚ÇΩ\n‚ñ™ –ö–æ–Ω—Ç–∞–∫—Ç: ${formData.contact}`;
                
                const telegramResponse = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: telegramMessage,
                        parse_mode: 'HTML'
                    }),
                    signal: AbortSignal.timeout(5000) // –¢–∞–π–º–∞—É—Ç 5 —Å–µ–∫—É–Ω–¥
                });

                if (!telegramResponse.ok) {
                    const errorData = await telegramResponse.json();
                    throw new Error(errorData.description || '–û—à–∏–±–∫–∞ Telegram API');
                }

                // –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
                alert('‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!\n\n–Ø —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.');
                form.reset();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                let errorMessage = '‚ö† –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.\n\n';
                
                if (error.name === 'AbortError') {
                    errorMessage += '–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞.';
                } else if (error.message.includes('–∏–Ω—Ç–µ—Ä–Ω–µ—Ç')) {
                    errorMessage += '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.';
                } else {
                    errorMessage += `–ü—Ä–∏—á–∏–Ω–∞: ${error.message}`;
                }
                
                errorMessage += '\n\n–•–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ Telegram –≤—Ä—É—á–Ω—É—é?';
                
                // 2. –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - —Å—Å—ã–ª–∫–∞ –Ω–∞ Telegram
                const formattedMessage = `–ù–æ–≤—ã–π –∑–∞–∫–∞–∑:%0A%0A‚ñ™ –¢–∏–ø: ${encodeURIComponent(formData.serviceType)}%0A‚ñ™ –û–ø–∏—Å–∞–Ω–∏–µ: ${encodeURIComponent(formData.description)}%0A‚ñ™ –ë—é–¥–∂–µ—Ç: ${encodeURIComponent(formData.budget)}‚ÇΩ%0A‚ñ™ –ö–æ–Ω—Ç–∞–∫—Ç: ${encodeURIComponent(formData.contact)}`;
                const telegramUrl = `https://t.me/manager_overhaul?text=${formattedMessage}`;
                
                if (confirm(errorMessage)) {
                    try {
                        // –ü—Ä–æ–±—É–µ–º –æ—Ç–∫—Ä—ã—Ç—å Telegram
                        const newWindow = window.open(telegramUrl, '_blank');
                        
                        if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                            window.location.href = `tg://resolve?domain=manager_overhaul&text=${formattedMessage}`;
                            setTimeout(() => {
                                if (!document.hidden) {
                                    alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å Telegram. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:\n1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Telegram\n2. –ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ: @manager_overhaul\n3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏');
                                }
                            }, 1000);
                        }
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è Telegram:', e);
                        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ Telegram: @manager_overhaul');
                    }
                }
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
            }
        });
    </script>
    <script src="script.js" defer></script>
</body>
</html>